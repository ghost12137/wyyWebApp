{"remainingRequest":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Wamp_html\\examples\\vue\\16-wymusic\\src\\views\\profile\\Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\src\\views\\profile\\Profile.vue","mtime":1616833186543},{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTmF2QmFyIGZyb20gJ2NvbXBvbmVudHMvY29tbW9uL25hdmJhci9OYXZCYXInOw0KaW1wb3J0IFNjcm9sbCBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9zY3JvbGwvU2Nyb2xsJzsNCg0KaW1wb3J0IHsgZ2V0VXNlclByb2ZpbGVNZXNzZ2UgfSBmcm9tICJuZXR3b3JrL3Byb2ZpbGUiOw0KDQppbXBvcnQgTGVmdFBvcCBmcm9tICcuLi9sZWZ0cG9wL0xlZnRQb3AnOw0KDQppbXBvcnQgVXNlck1zZyBmcm9tICcuL2NoaWxkQ29tcHMvVXNlck1zZyc7DQppbXBvcnQgVGFza3MgZnJvbSAnLi9jaGlsZENvbXBzL1Rhc2tzLnZ1ZSc7DQppbXBvcnQgTXlGYXZvcml0ZVNvbmcgZnJvbSAnLi9jaGlsZENvbXBzL015RmF2b3JpdGVTb25nJzsNCmltcG9ydCBNdXNpY0N0cmwgZnJvbSAnLi9jaGlsZENvbXBzL211c2ljQ3RybC52dWUnOw0KaW1wb3J0IENyZWF0ZVNvbmdMaXN0IGZyb20gJy4vY2hpbGRDb21wcy9DcmVhdGVTb25nTGlzdCc7DQppbXBvcnQgQ29sbGVjdFNvbmdMaXN0IGZyb20gJy4vY2hpbGRDb21wcy9Db2xsZWN0U29uZ0xpc3QudnVlJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgTmF2QmFyLA0KICAgIExlZnRQb3AsDQogICAgVXNlck1zZywNCiAgICBUYXNrcywNCiAgICBTY3JvbGwsDQogICAgTXlGYXZvcml0ZVNvbmcsDQogICAgTXVzaWNDdHJsLA0KICAgIENyZWF0ZVNvbmdMaXN0LA0KICAgIENvbGxlY3RTb25nTGlzdCwNCiAgfSwNCiAgbmFtZTogJ1Byb2ZpbGUnLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsZWZ0UG9wVXA6IGZhbHNlLCAgIC8v5Liq5Lq65L+h5oGv5bem5by55Ye65bGC5pi+56S6DQogICAgICBzaG93TXNnOiBmYWxzZSwgICAgIC8v5Liq5Lq65L+h5oGvbmF2YmFy5by55Ye6DQogICAgICBteUZhdm9yaXRlU29uZzoge30sIC8v5oiR5Zac5qyi55qE6Z+z5LmQDQogICAgICBjcmVhdGVTb25nTGlzdDogW10sIC8v5Yib5bu655qE5q2M5Y2VDQogICAgICBjb2xsZWN0U29uZ0xpc3Q6IFtdLC8v5pS26JeP55qE5q2M5Y2VDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8qKg0KICAgICAqIOS6i+S7tuebkeWQrOebuOWFs+aWueazlQ0KICAgICAqLw0KICAgIC8v54K55Ye75bem5LiK6KeS5pu05aSa5bem5by55Ye65bGC5pi+56S65LqL5Lu2DQogICAgbGVmdFBvcENsaWNrKCkgew0KICAgICAgLy8gY29uc29sZS5sb2coJ2xlZnRjbGljaycpOw0KICAgICAgdGhpcy5sZWZ0UG9wVXAgPSB0cnVlOw0KICAgIH0sDQogICAgLy/nm5HlkKzliLDpgIDlh7rngrnlh7vkuovku7bvvIzpmpDol4/lvLnlh7rlsYINCiAgICBjaGFuZ2VQb3BTdGF0dXMoKSB7DQogICAgICB0aGlzLmxlZnRQb3BVcCA9IGZhbHNlOw0KICAgICAgLy/muIXnqbrmlbDmja4NCiAgICAgIHRoaXMubXlGYXZvcml0ZVNvbmcgPSB7fTsNCiAgICAgIHRoaXMuY3JlYXRlU29uZ0xpc3QgPSBbXTsNCiAgICAgIHRoaXMuY29sbGVjdFNvbmdMaXN0ID0gW107DQogICAgfSwNCiAgICAvL+ebkeWQrOa7muWKqA0KICAgIGNvbnRlbnRTY3JvbGwocG9zaXRpb24pIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHBvc2l0aW9uKTsNCiAgICAgIGlmIChNYXRoLmFicyhwb3NpdGlvbi55KSA+IDgwKSB7DQogICAgICAgIHRoaXMuc2hvd01zZyA9IHRydWU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnNob3dNc2cgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOe9kee7nOivt+axguebuOWFs+aWueazlQ0KICAgICAqLw0KICAgIC8v6I635Y+W55So5oi35q2M5Y2VDQogICAgZ2V0VXNlclByb2ZpbGVNZXNzZ2UodWlkKSB7DQogICAgICBnZXRVc2VyUHJvZmlsZU1lc3NnZSh1aWQpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coInVzZXIgcHJvZmlsZSBpbiBwcm9maWxlIiwgcmVzKTsNCiAgICAgICAgICAvL+WWnOasoueahOmfs+S5kA0KICAgICAgICAgIHRoaXMubXlGYXZvcml0ZVNvbmcgPSByZXMucGxheWxpc3RbMF07DQogICAgICAgICAgLy/liJvlu7rnmoTmrYzljZUNCiAgICAgICAgICB0aGlzLmNyZWF0ZVNvbmdMaXN0ID0gcmVzLnBsYXlsaXN0LmZpbHRlcigoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgIGlmIChpbmRleCAhPSAwICYmIGl0ZW0udXNlcklkID09IHRoaXMuJHN0b3JlLnN0YXRlLnVpZCkgcmV0dXJuIGl0ZW07DQogICAgICAgICAgfSk7DQogICAgICAgICAgLy/mlLbol4/nmoTmrYzljZUNCiAgICAgICAgICB0aGlzLmNvbGxlY3RTb25nTGlzdCA9IHJlcy5wbGF5bGlzdC5maWx0ZXIoKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgICBpZiAoaW5kZXggIT0gMCAmJiBpdGVtLnVzZXJJZCAhPSB0aGlzLiRzdG9yZS5zdGF0ZS51aWQpIHJldHVybiBpdGVtOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICBjb25zdCBzdGF0dXNDb2RlID0gZXJyLnJlc3BvbnNlLnN0YXR1czsNCiAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PSAzMDEpIGNvbnNvbGUubG9nKCfor7flhYjnmbvlvZUnKTsNCiAgICAgICAgfSkNCiAgICB9LA0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8vIOeZu+W9leWQjuiOt+WPlueUqOaIt+WktOWDjw0KICAgIHVzZXJIZWFkVXJsKCkgew0KICAgICAgbGV0IHVybCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJQcm9maWxlICE9IG51bGwgPyB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyUHJvZmlsZS5hdmF0YXJVcmwgOiByZXF1aXJlKCdhc3NldHMvaW1nL2xlZnRwb3B1cC91c2VyLnN2ZycpOw0KICAgICAgcmV0dXJuIHVybDsNCiAgICB9LA0KICAgIC8vIOeZu+W9leWQjuiOt+WPlueUqOaIt+aYteensA0KICAgIHVzZXJOaWNrTmFtZSgpIHsNCiAgICAgIGxldCBuaWNrTmFtZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJQcm9maWxlICE9IG51bGwgPyB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyUHJvZmlsZS5uaWNrbmFtZSA6ICfnq4vljbPnmbvlvZUnOw0KICAgICAgcmV0dXJuIG5pY2tOYW1lOw0KICAgIH0sDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgY29uc3QgdWlkID0gdGhpcy4kc3RvcmUuc3RhdGUudWlkOw0KICAgIC8v6I635Y+W55So5oi35q2M5Y2VDQogICAgaWYgKHVpZCAhPSBudWxsKQ0KICAgICAgdGhpcy5nZXRVc2VyUHJvZmlsZU1lc3NnZSh1aWQpOw0KICB9LA0KfQ0K"},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views/profile","sourcesContent":["<template>\r\n  <div id=\"profile\">\r\n    <nav-bar class=\"nav-bar\">\r\n      <div slot=\"left\" @click=\"leftPopClick\" class=\"left-pop\">\r\n        <img src=\"~assets/img/navbar/category.svg\" alt=\"\" />\r\n      </div>\r\n      <div slot=\"center\" v-if=\"showMsg\">\r\n        <img class=\"user-head\" v-lazy=\"userHeadUrl\" />\r\n        <span>{{ userNickName }}</span>\r\n      </div>\r\n    </nav-bar>\r\n    <!-- 个人信息等左弹出层 -->\r\n    <van-popup\r\n      class=\"left-van-popup\"\r\n      position=\"left\"\r\n      :style=\"{ height: '100vh', width: '70%' }\"\r\n      v-model=\"leftPopUp\"\r\n    >\r\n      <left-pop @logoutBtnClick=\"changePopStatus\" />\r\n    </van-popup>\r\n    <div class=\"container\">\r\n      <scroll\r\n        class=\"prifile-scroll\"\r\n        ref=\"profileScroll\"\r\n        :isListen=\"2\"\r\n        @scroll=\"contentScroll\"\r\n      >\r\n        <!-- 用户信息展示 -->\r\n        <user-msg />\r\n        <!-- 本地、播放等任务 -->\r\n        <tasks />\r\n        <!-- 我喜欢的音乐 -->\r\n        <my-favorite-song :my-favorite-song=\"myFavoriteSong\" />\r\n        <!-- 创建歌单/收藏歌单按钮 -->\r\n        <music-ctrl :titles=\"['创建歌单', '', '收藏歌单']\" />\r\n        <!-- 创建歌单 -->\r\n        <create-song-list :create-song-list=\"createSongList\" />\r\n        <!-- 收藏歌单 -->\r\n        <collect-song-list :collect-song-list=\"collectSongList\"/>\r\n\r\n      </scroll>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from 'components/common/navbar/NavBar';\r\nimport Scroll from 'components/common/scroll/Scroll';\r\n\r\nimport { getUserProfileMessge } from \"network/profile\";\r\n\r\nimport LeftPop from '../leftpop/LeftPop';\r\n\r\nimport UserMsg from './childComps/UserMsg';\r\nimport Tasks from './childComps/Tasks.vue';\r\nimport MyFavoriteSong from './childComps/MyFavoriteSong';\r\nimport MusicCtrl from './childComps/musicCtrl.vue';\r\nimport CreateSongList from './childComps/CreateSongList';\r\nimport CollectSongList from './childComps/CollectSongList.vue';\r\n\r\nexport default {\r\n  components: {\r\n    NavBar,\r\n    LeftPop,\r\n    UserMsg,\r\n    Tasks,\r\n    Scroll,\r\n    MyFavoriteSong,\r\n    MusicCtrl,\r\n    CreateSongList,\r\n    CollectSongList,\r\n  },\r\n  name: 'Profile',\r\n  data() {\r\n    return {\r\n      leftPopUp: false,   //个人信息左弹出层显示\r\n      showMsg: false,     //个人信息navbar弹出\r\n      myFavoriteSong: {}, //我喜欢的音乐\r\n      createSongList: [], //创建的歌单\r\n      collectSongList: [],//收藏的歌单\r\n    };\r\n  },\r\n  methods: {\r\n    /**\r\n     * 事件监听相关方法\r\n     */\r\n    //点击左上角更多左弹出层显示事件\r\n    leftPopClick() {\r\n      // console.log('leftclick');\r\n      this.leftPopUp = true;\r\n    },\r\n    //监听到退出点击事件，隐藏弹出层\r\n    changePopStatus() {\r\n      this.leftPopUp = false;\r\n      //清空数据\r\n      this.myFavoriteSong = {};\r\n      this.createSongList = [];\r\n      this.collectSongList = [];\r\n    },\r\n    //监听滚动\r\n    contentScroll(position) {\r\n      // console.log(position);\r\n      if (Math.abs(position.y) > 80) {\r\n        this.showMsg = true;\r\n      } else {\r\n        this.showMsg = false;\r\n      }\r\n    },\r\n    /**\r\n     * 网络请求相关方法\r\n     */\r\n    //获取用户歌单\r\n    getUserProfileMessge(uid) {\r\n      getUserProfileMessge(uid)\r\n        .then(res => {\r\n          console.log(\"user profile in profile\", res);\r\n          //喜欢的音乐\r\n          this.myFavoriteSong = res.playlist[0];\r\n          //创建的歌单\r\n          this.createSongList = res.playlist.filter((item, index) => {\r\n            if (index != 0 && item.userId == this.$store.state.uid) return item;\r\n          });\r\n          //收藏的歌单\r\n          this.collectSongList = res.playlist.filter((item, index) => {\r\n            if (index != 0 && item.userId != this.$store.state.uid) return item;\r\n          });\r\n        })\r\n        .catch(err => {\r\n          const statusCode = err.response.status;\r\n          if (statusCode == 301) console.log('请先登录');\r\n        })\r\n    },\r\n  },\r\n  computed: {\r\n    // 登录后获取用户头像\r\n    userHeadUrl() {\r\n      let url = this.$store.state.userProfile != null ? this.$store.state.userProfile.avatarUrl : require('assets/img/leftpopup/user.svg');\r\n      return url;\r\n    },\r\n    // 登录后获取用户昵称\r\n    userNickName() {\r\n      let nickName = this.$store.state.userProfile != null ? this.$store.state.userProfile.nickname : '立即登录';\r\n      return nickName;\r\n    },\r\n  },\r\n  created() {\r\n    const uid = this.$store.state.uid;\r\n    //获取用户歌单\r\n    if (uid != null)\r\n      this.getUserProfileMessge(uid);\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#profile {\r\n  background-color: #f6f6f4;\r\n  height: calc(100vh - 50px);\r\n  overflow: hidden;\r\n}\r\n.container {\r\n  width: 90%;\r\n  height: calc(100% - 49px);\r\n  margin: 0 auto;\r\n}\r\n.nav-bar {\r\n  background-color: #ffffff;\r\n  z-index: 9;\r\n  position: relative;\r\n}\r\n.nav-bar img {\r\n  vertical-align: middle;\r\n  width: 25px;\r\n}\r\n.prifile-scroll {\r\n  height: 97%;\r\n}\r\n</style>"]}]}