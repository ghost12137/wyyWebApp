{"remainingRequest":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Wamp_html\\examples\\vue\\16-wymusic\\src\\views\\songSquare\\SongSquare.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\src\\views\\songSquare\\SongSquare.vue","mtime":1617362373763},{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Wamp_html\\examples\\vue\\16-wymusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRTb25nVGl0bGVMaXN0LCBnZXRGaW5lV29ya0xpc3QsIGdldEhvdFdvcmtMaXN0IH0gZnJvbSAibmV0d29yay9zb25nc3F1YXJlIjsNCmltcG9ydCBTY3JvbGwgZnJvbSAnY29tcG9uZW50cy9jb21tb24vc2Nyb2xsL1Njcm9sbCc7DQoNCmltcG9ydCBUaXRsZVNjcm9sbCBmcm9tICcuL2NoaWxkQ29tcHMvVGl0bGVTY3JvbGwnOw0KaW1wb3J0IFNvbmdJdGVtIGZyb20gJy4vY2hpbGRDb21wcy9Tb25nSXRlbS52dWUnOw0KaW1wb3J0IHsgVG9hc3QgfSBmcm9tICd2YW50JzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnU29uZ1NxdWFyZScsDQogIGNvbXBvbmVudHM6IHsNCiAgICBUaXRsZVNjcm9sbCwNCiAgICBTY3JvbGwsDQogICAgU29uZ0l0ZW0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRpdGxlTGlzdDogW10sICAvL+agh+mimOWIl+ihqO+8jOaOqOiNkOetiQ0KICAgICAgY3VycmVudEluZGV4OiAwLC8v5b2T5YmN5pi+56S65YaF5a65DQogICAgICBTb25nTGlzdDogW10sICAgLy/mrYzljZXliJfooajvvIzmiYDku6UNCiAgICAgIGJlZm9yZTogJycsICAgICAgLy9iZWZvcmXlj4LmlbANCiAgICAgIHBhZ2U6IDAsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8qKg0KICAgICAqIOS6i+S7tuWTjeW6lOebuOWFs+aWueazlQ0KICAgICAqLw0KICAgIC8v54K55Ye75qCH6aKY5YiH5o2i5YaF5a65DQogICAgdGl0bGVDbGljayhpbmRleCkgew0KICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBpbmRleDsNCiAgICAgIC8v5riF56m65pWw5o2uDQogICAgICB0aGlzLlNvbmdMaXN0ID0gW107DQogICAgICB0aGlzLmJlZm9yZSA9ICcnOw0KICAgICAgdGhpcy5wYWdlID0gMDsNCiAgICAgIGlmIChpbmRleCA9PT0gMCkgew0KICAgICAgICB0aGlzLmdldEZpbmVXb3JrTGlzdCh0aGlzLnRpdGxlTGlzdFtpbmRleF0uaWQsIDMwKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZ2V0SG90V29ya0xpc3QodGhpcy50aXRsZUxpc3RbaW5kZXhdLm5hbWUsIDMwLCB0aGlzLnBhZ2UpOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy/kuIrmi4nliqDovb3mm7TlpJoNCiAgICBsb2FkTW9yZSgpIHsNCiAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA9PT0gMCkgew0KICAgICAgICB0aGlzLmdldEZpbmVXb3JrTGlzdCgwLCAxNSwgdGhpcy5iZWZvcmUpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5nZXRIb3RXb3JrTGlzdCh0aGlzLnRpdGxlTGlzdFt0aGlzLmN1cnJlbnRJbmRleF0ubmFtZSwgOSwgdGhpcy5wYWdlKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOe9kee7nOivt+axguebuOWFs+aWueazlQ0KICAgICAqLw0KICAgIC8v6I635Y+W5q2M5Y2V5qCH6aKYDQogICAgZ2V0U29uZ1RpdGxlTGlzdCgpIHsNCiAgICAgIGdldFNvbmdUaXRsZUxpc3QoKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXMgb2Ygc29uZyB0aXRsZSBpbiBzb25nc3F1YXJlOiAiLCByZXMpOw0KICAgICAgICAgIHRoaXMudGl0bGVMaXN0ID0gcmVzLnRhZ3Muc2xpY2UoMCwgNSk7DQogICAgICAgICAgbGV0IHJlY29tbWVuZCA9IHsNCiAgICAgICAgICAgIG5hbWU6ICfnsr7lk4EnLA0KICAgICAgICAgICAgaWQ6IDANCiAgICAgICAgICB9Ow0KICAgICAgICAgIHRoaXMudGl0bGVMaXN0LnVuc2hpZnQocmVjb21tZW5kKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIG9mIHNvbmcgdGl0bGUgaW4gc29uZ3NxdWFyZTonLCBlcnIpOw0KICAgICAgICB9KQ0KICAgIH0sDQogICAgLy/ojrflj5bnsr7lk4HmrYzljZUNCiAgICBnZXRGaW5lV29ya0xpc3QodHlwZSwgbGltaXQsIGJlZm9yZSkgew0KICAgICAgVG9hc3QubG9hZGluZyh7DQogICAgICAgIGR1cmF0aW9uOiAwLA0KICAgICAgICBmb3JiaWRDbGljazogdHJ1ZSwNCiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rScNCiAgICAgIH0pOw0KICAgICAgZ2V0RmluZVdvcmtMaXN0KHR5cGUsIGxpbWl0LCBiZWZvcmUpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlcyBvZiBmaW5lIHdvcmsgaW4gdGl0bGVzY3JvbGw6ICcsIHJlcyk7DQogICAgICAgICAgdGhpcy5Tb25nTGlzdC5wdXNoKC4uLnJlcy5wbGF5bGlzdHMpOw0KICAgICAgICAgIHRoaXMuYmVmb3JlID0gcmVzLmxhc3R0aW1lOw0KICAgICAgICAgIGlmICh0eXBlb2YgKGJlZm9yZSkgIT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMuc29uZ1Njcm9sbC5maW5pc2hQdWxsVXAoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBvZiBmaW5lIHdvcmsgaW4gdGl0bGVzY3JvbGw6ICcsIGVycik7DQogICAgICAgIH0pDQogICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICBUb2FzdC5jbGVhcigpOw0KICAgICAgICB9KQ0KICAgIH0sDQogICAgLy8g6I635Y+W54Ot6Zeo5q2M5Y2VDQogICAgZ2V0SG90V29ya0xpc3QoY2F0LCBsaW1pdCwgb2Zmc2V0KSB7DQogICAgICBUb2FzdC5sb2FkaW5nKHsNCiAgICAgICAgZHVyYXRpb246IDAsDQogICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiAn5Yqg6L295LitJw0KICAgICAgfSk7DQogICAgICBnZXRIb3RXb3JrTGlzdChjYXQsIGxpbWl0LCBvZmZzZXQpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlcyBvZiBob3Qgd29yayBsaXN0IGluIHNvbmdzcXVhcmU6JywgcmVzKTsNCiAgICAgICAgICB0aGlzLlNvbmdMaXN0LnB1c2goLi4ucmVzLnBsYXlsaXN0cyk7DQogICAgICAgICAgaWYgKHRoaXMucGFnZSA9PSAwKSB7DQogICAgICAgICAgICB0aGlzLnBhZ2UgPSAzMDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5wYWdlICs9IDk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICh0aGlzLnBhZ2UpIHsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMuc29uZ1Njcm9sbC5maW5pc2hQdWxsVXAoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBvZiBob3Qgd29yayBsaXN0IGluIHNvbmdzcXVhcmU6JywgZXJyKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgIFRvYXN0LmNsZWFyKCk7DQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy/ojrflj5bmrYzljZXmoIfpopgNCiAgICB0aGlzLmdldFNvbmdUaXRsZUxpc3QoKTsNCiAgICAvL+iOt+WPlueyvuWTgeatjOWNlQ0KICAgIHRoaXMuZ2V0RmluZVdvcmtMaXN0KDAsIDMwKTsNCiAgfSwNCn0NCg=="},{"version":3,"sources":["SongSquare.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SongSquare.vue","sourceRoot":"src/views/songSquare","sourcesContent":["<template>\r\n  <div class=\"song-square\">\r\n    <!-- 标题滚条 -->\r\n    <title-scroll :title-list=\"titleList\" @titleClick=\"titleClick\" />\r\n\r\n    <scroll\r\n      class=\"song-scroll\"\r\n      :pull-up-load=\"true\"\r\n      ref=\"songScroll\"\r\n      @pullingUp=\"loadMore\"\r\n    >\r\n      <div class=\"song-content\">\r\n        <song-item\r\n          v-for=\"item in SongList\" \r\n          :key=\"item.id\" \r\n          :item=\"item\" />\r\n      </div>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSongTitleList, getFineWorkList, getHotWorkList } from \"network/songsquare\";\r\nimport Scroll from 'components/common/scroll/Scroll';\r\n\r\nimport TitleScroll from './childComps/TitleScroll';\r\nimport SongItem from './childComps/SongItem.vue';\r\nimport { Toast } from 'vant';\r\n\r\nexport default {\r\n  name: 'SongSquare',\r\n  components: {\r\n    TitleScroll,\r\n    Scroll,\r\n    SongItem,\r\n  },\r\n  data() {\r\n    return {\r\n      titleList: [],  //标题列表，推荐等\r\n      currentIndex: 0,//当前显示内容\r\n      SongList: [],   //歌单列表，所以\r\n      before: '',      //before参数\r\n      page: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    /**\r\n     * 事件响应相关方法\r\n     */\r\n    //点击标题切换内容\r\n    titleClick(index) {\r\n      this.currentIndex = index;\r\n      //清空数据\r\n      this.SongList = [];\r\n      this.before = '';\r\n      this.page = 0;\r\n      if (index === 0) {\r\n        this.getFineWorkList(this.titleList[index].id, 30);\r\n      } else {\r\n        this.getHotWorkList(this.titleList[index].name, 30, this.page);\r\n      }\r\n    },\r\n    //上拉加载更多\r\n    loadMore() {\r\n      if (this.currentIndex === 0) {\r\n        this.getFineWorkList(0, 15, this.before);\r\n      } else {\r\n        this.getHotWorkList(this.titleList[this.currentIndex].name, 9, this.page);\r\n      }\r\n    },\r\n    /**\r\n     * 网络请求相关方法\r\n     */\r\n    //获取歌单标题\r\n    getSongTitleList() {\r\n      getSongTitleList()\r\n        .then(res => {\r\n          console.log(\"res of song title in songsquare: \", res);\r\n          this.titleList = res.tags.slice(0, 5);\r\n          let recommend = {\r\n            name: '精品',\r\n            id: 0\r\n          };\r\n          this.titleList.unshift(recommend);\r\n        })\r\n        .catch(err => {\r\n          console.log('error of song title in songsquare:', err);\r\n        })\r\n    },\r\n    //获取精品歌单\r\n    getFineWorkList(type, limit, before) {\r\n      Toast.loading({\r\n        duration: 0,\r\n        forbidClick: true,\r\n        message: '加载中'\r\n      });\r\n      getFineWorkList(type, limit, before)\r\n        .then(res => {\r\n          // console.log('res of fine work in titlescroll: ', res);\r\n          this.SongList.push(...res.playlists);\r\n          this.before = res.lasttime;\r\n          if (typeof (before) != 'undefined') {\r\n            this.$refs.songScroll.finishPullUp();\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log('error of fine work in titlescroll: ', err);\r\n        })\r\n        .finally(() => {\r\n          Toast.clear();\r\n        })\r\n    },\r\n    // 获取热门歌单\r\n    getHotWorkList(cat, limit, offset) {\r\n      Toast.loading({\r\n        duration: 0,\r\n        forbidClick: true,\r\n        message: '加载中'\r\n      });\r\n      getHotWorkList(cat, limit, offset)\r\n        .then(res => {\r\n          // console.log('res of hot work list in songsquare:', res);\r\n          this.SongList.push(...res.playlists);\r\n          if (this.page == 0) {\r\n            this.page = 30;\r\n          } else {\r\n            this.page += 9;\r\n          }\r\n          if (this.page) {\r\n            this.$refs.songScroll.finishPullUp();\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log('error of hot work list in songsquare:', err);\r\n        })\r\n        .finally(() => {\r\n          Toast.clear();\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    //获取歌单标题\r\n    this.getSongTitleList();\r\n    //获取精品歌单\r\n    this.getFineWorkList(0, 30);\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.song-square {\r\n  background-color: #f6f6f4;\r\n  height: calc(100vh - 50px);\r\n  overflow: hidden;\r\n}\r\n.song-scroll {\r\n  margin-top: 40px;\r\n  height: calc(100% - 50px);\r\n  overflow: hidden;\r\n}\r\n.song-content {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n  height: calc(100% - 50px);\r\n}\r\n</style>"]}]}